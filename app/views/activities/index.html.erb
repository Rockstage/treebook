
<h2>Activity Feed</h2>
	<% if @user == current_user %>
		<%= link_to "Post a New Status", new_status_path, class: "btn btn-success" %><hr />
	<% end %>

<div id="links">
	<ul id="activities" data-role="listview" data-filter="true">
	<% @activities.each do |activity| %>
		
			<% if activity.targetable %>
				<li>
					<div id="feed" class="media">
						<%= avatar_profile_link activity.user, {}, class: 'pull-left' %>
						<div id="feed-body" class="media-body">
							<h4 id="feed-heading" class="media-heading">
								<%= activity.user.full_name %>
							</h4>
								<blockquote>
								<%= render partial: "activities/#{activity.targetable_type.underscore}/#{activity.action}", locals: { activity: activity } %>
								<small id="feed-small"><%= time_ago_in_words(activity.created_at) + ' ago' %></small>
								</blockquote>
							<br />
							
						</div>
					</div>
					<hr />
				</li>
			<% end %>
		
	<% end %>
	</ul>
</div>

<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">

    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>

</div>

<script>
document.getElementById('links').onclick = function (event) {
    event = event || window.event;
    var target = event.target || event.srcElement,
        link = target.src ? target.parentNode : target,
        options = {index: link, event: event},
        links = this.getElementsByTagName('a');
    blueimp.Gallery(links, options);
};
</script>
